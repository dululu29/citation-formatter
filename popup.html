<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citation Formatter Status</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="dist/output.css">
    <style>
        /* Ensure fonts load */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap'); /* Added Roboto Mono */
        body {
            width: 320px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
        }
        .spinner {
            display: inline-block; vertical-align: middle; width: 1rem; height: 1rem; margin-right: 0.5rem;
            border: 2px solid currentColor; border-right-color: transparent; border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Consistent styling for output areas */
        .citation-display {
            font-family: 'Roboto Mono', monospace;
            font-size: 11px;
            line-height: 1.4;
            border: 1px solid #d1d5db; /* gray-300 */
            background-color: #f9fafb; /* gray-50 */
            padding: 8px 12px; /* py-2 px-3 */
            border-radius: 0.375rem; /* rounded-md */
            color: #374151; /* gray-700 */
            box-shadow: inset 0 1px 2px 0 rgb(0 0 0 / 0.05);
            width: 100%;
            box-sizing: border-box;
            margin-top: 4px; /* Add space below label */
            /* Removed fixed heights */
        }
        /* Specific styles for textarea */
        #citation-output.citation-display {
            resize: vertical; /* Allow vertical resize */
            min-height: 4.5em; /* Start with a reasonable min height (approx 3 lines) */
            /* Removed rows attribute */
        }
         /* Specific styles for paragraph */
        #ppt-output.citation-display {
            white-space: normal; /* Allow wrapping */
            word-break: break-word; /* Break long words */
            /* Removed max-height */
        }

        /* Wrapper for label, output, and button */
        .citation-wrapper {
            position: relative; /* Needed for absolute positioning of the button */
            margin-bottom: 0.75rem; /* mb-3 */
        }

        /* Copy button styling */
        .copy-button {
            position: absolute;
            top: 0px; /* Align with the top of the wrapper */
            right: 0px;
            padding: 4px; /* p-1 */
            background-color: #f9fafb; /* bg-gray-50 */
            border: 1px solid #e5e7eb; /* border-gray-200 */
            border-radius: 0.375rem; /* rounded-md */
            cursor: pointer;
            color: #6b7280; /* text-gray-500 */
            transition: all 0.15s ease-in-out;
        }
        .copy-button:hover {
            background-color: #f3f4f6; /* hover:bg-gray-100 */
            color: #374151; /* hover:text-gray-700 */
        }
        .copy-button svg {
            width: 14px; /* Adjust size */
            height: 14px;
            display: block; /* Prevent extra space below SVG */
        }
        /* Style for 'copied' state */
        .copy-button.copied {
            color: #16a34a; /* text-green-600 */
            background-color: #dcfce7; /* bg-green-100 */
            border-color: #86efac; /* border-green-300 */
        }
    </style>
</head>
<body class="p-4 bg-gray-50 text-sm">
    <div id="status-container" class="text-center text-gray-700 mb-3">
        <div id="loading-indicator">
            <div class="spinner text-indigo-600" role="status">
                <span class="sr-only">Loading...</span>
            </div>
            <span class="font-medium align-middle">Fetching citation...</span>
        </div>
        <div id="status-message" class="font-medium hidden"></div>
    </div>

    <div id="full-citation-area" class="citation-wrapper hidden">
         <label for="citation-output" class="block text-xs font-medium text-gray-600">Full Citation:</label>
         <textarea id="citation-output" class="citation-display" readonly placeholder="Citation will appear here..."></textarea>
         <button id="copy-full-button" class="copy-button" title="Copy Full Citation">
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                 <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 4.625-2.25-2.25m0 0L15.75 15m-2.25 2.25V15" />
             </svg>
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="hidden">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
             </svg>
         </button>
    </div>

    <div id="ppt-citation-area" class="citation-wrapper hidden">
        <label for="ppt-output" class="block text-xs font-medium text-gray-600">PowerPoint Format:</label>
        <p id="ppt-output" class="citation-display"></p>
        <button id="copy-ppt-button" class="copy-button" title="Copy PowerPoint Citation">
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                 <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 4.625-2.25-2.25m0 0L15.75 15m-2.25 2.25V15" />
             </svg>
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="hidden">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
             </svg>
        </button>
    </div>

    <script src="popup.js"></script>
</body>
</html>
